<!DOCTYPE html>
<html>
<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:ui="http://java.sun.com/jsf/facelets">

    <h:head>
        <title>#{groupCtl.currentPage.title}</title>

        <meta charset="utf-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
    </h:head>
    <h:body>
        <h:outputStylesheet library="css" name="tflow.css#{groupCtl.forceReloadResources}" target="head"/>
        <h:outputScript library="js" name="group.js#{groupCtl.forceReloadResources}" target="head"/>

        <script>console.log('-- first-line of editor --');</script>
        <div class="container">
            <ui:include src="resources/ajaxexception.xhtml">
                <ui:param name="controller" value="#{groupCtl}"/>
            </ui:include>
            <ui:include src="resources/topMenu.xhtml"/>
            <div class="screen-area" style="background-color:var(--surface-e);padding:var(--padding);display: flex">
                <h:form id="groupForm">
                    <p:panel style="width: 100%">
                        <f:facet name="header">
                            <p:outputLabel style="padding:var(--padding) !important;">
                                <i class="pi pi-folder-open" style="font-size:var(--font-size-2)"/>
                                <p:outputLabel value=" #{groupCtl.currentPage.title}" style="font-weight:bolder;font-size:var(--font-size-2)"/>
                            </p:outputLabel>
                        </f:facet>
                        <p:tabView>
                            <p:ajax event="tabChange" listener="#{groupCtl.openSection}" update="#{groupCtl.openSectionUpdate}"/>
                            <p:tab title="Existing Project">
                                <p:outputLabel value="#{groupCtl.currentPage.description}"/>
                                <p:panelGrid id="existingProject" columns="3" columnClasses="ui-g-5,ui-g-5,ui-g-2" styleClass="ui-g-12">
                                    <p:panel header="Group List">
                                        <p:dataTable value="#{groupCtl.groupList.groupList}" var="group" selection="#{groupCtl.selectedGroup}" selectionMode="single" rowKey="#{group.id}" stickyHeader="true">
                                            <p:column>#{group.name} (#{group.id})</p:column>
                                        </p:dataTable>
                                    </p:panel>
                                    <p:panel header="Project List">
                                        <p:dataTable value="#{groupCtl.projectList}" var="project" selection="#{groupCtl.selectedProject}" selectionMode="single" rowKey="#{project.id}" stickyHeader="true">
                                            <p:column>#{project.name} (#{project.id})</p:column>
                                        </p:dataTable>
                                    </p:panel>
                                    <p:outputPanel>
                                        <p:commandButton value="Open Project" style="width:100%;margin:var(--margin)" actionListener="#{groupCtl.openSelectedProject}"/>
                                        <p:commandButton value="Clone Project" style="width:100%;margin:var(--margin)" actionListener="#{groupCtl.cloneSelectedProject}"/>
                                    </p:outputPanel>
                                </p:panelGrid>
                            </p:tab>
                            <p:tab title="Project Template">
                                <p:outputLabel value="#{groupCtl.currentPage.description}"/>
                                <p:outputPanel id="projectTemplate" styleClass="ui-g">
                                    <p:selectOneMenu styleClass="ui-g-10">
                                        <f:selectItems value="#{groupCtl.groupList.groupList}" var="groupItem" itemLabel="#{groupItem.name}" itemValue="#{groupItem.id}"/>
                                    </p:selectOneMenu>
                                    <p:outputPanel styleClass="ui-g-2">
                                        <p:commandButton value="New Project" style="width:100%;"/>
                                    </p:outputPanel>
                                </p:outputPanel>
                                <p:panel styleClass="ui-g-12" header="Template List">
                                    <!-- TODO: Include Empty Template -->
                                    <h1>Include Empty Template here</h1>
                                </p:panel>
                            </p:tab>
                            <p:tab title="Testing">
                                <div class="ui-g">
                                    <div class="ui-g-3" style="padding:var(--padding)">
                                        <p:commandButton value="Throw Exception 1" actionListener="#{groupCtl.throwException}"/>
                                    </div>
                                    <div class="ui-g-3" style="padding:var(--padding)">
                                        <p:commandButton value="Throw Exception 2" actionListener="#{groupCtl.throwException2}"/>
                                    </div>
                                    <div class="ui-g-3" style="padding:var(--padding)">
                                        <p:commandButton value="Open Project 102" actionListener="#{groupCtl.openProject('P102')}"/>
                                    </div>
                                    <div class="ui-g-3" style="padding:var(--padding)">
                                        <p:commandButton value="Clone Project 102" actionListener="#{groupCtl.cloneProject(0,'P102')}"/>
                                    </div>
                                </div>

                                <p:divider align="left">
                                    <div class="inline-flex align-items-center">
                                        <i class="pi pi-circle-on"/>
                                        <b>Threads</b>
                                    </div>
                                </p:divider>

                                <div class="ui-g">
                                    <div class="ui-g-3" style="padding:var(--padding)">
                                        <p:commandButton value="Throw Exception 1" actionListener="#{groupCtl.throwException}"/>
                                    </div>
                                    <div class="ui-g-3" style="padding:var(--padding)">
                                        <p:commandButton value="Throw Exception 2" actionListener="#{groupCtl.throwException2}"/>
                                    </div>
                                    <div class="ui-g-3" style="padding:var(--padding)">
                                        <p:commandButton value="Open Project 102" actionListener="#{groupCtl.openProject('P102')}"/>
                                    </div>
                                    <div class="ui-g-3" style="padding:var(--padding)">
                                        <p:commandButton value="Clone Project 102" actionListener="#{groupCtl.cloneProject(0,'P102')}"/>
                                    </div>
                                </div>

                            </p:tab>
                        </p:tabView>
                    </p:panel>
                </h:form>
            </div>
        </div>
    </h:body>
</f:view>
</html>